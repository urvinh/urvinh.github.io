<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.8.7">Jekyll</generator>
  <link href="/tag/wsl/feed.xml" rel="self" type="application/atom+xml" />
  <link href="/" rel="alternate" type="text/html" />
  <updated>2020-06-10T14:57:59+00:00</updated>
  <id>/tag/wsl/feed.xml</id>

  
  
  

  
    <title type="html">ZEIT | </title>
  

  
    <subtitle>tips and tools</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">Set and use Zsh as default shell in WSL</title>
      <link href="/set-zsh-wsl" rel="alternate" type="text/html" title="Set and use Zsh as default shell in WSL" />
      <published>2018-07-04T08:00:00+00:00</published>
      <updated>2018-07-04T08:00:00+00:00</updated>
      <id>/set-zsh-wsl</id>
      <content type="html" xml:base="/set-zsh-wsl">&lt;p&gt;It isn’t that hard…&lt;/p&gt;

&lt;p&gt;A few months ago, I wrote an article to show how to get Zsh in WSL on Windows 10. But I haven’t exactly shown how to make it the default shell. In facts, you can’t (not the “official” way anyway), because bash.exe in System32 folder is meant to call bash shell, not zsh. So no matter how you try to set zsh as the default shell through chsh -s $(which zsh), it doesn’t work if you still call to bash.exe everytime you use WSL.&lt;/p&gt;

&lt;p&gt;Knowing this, the WSL team has made some changes. In the recent Windows 10 Insider builds for Windows 10 Fall Creator Update, there’s a &lt;strong&gt;wsl.exe&lt;/strong&gt; file in System32 which performs two functions &lt;a href=&quot;https://github.com/Microsoft/BashOnWindows/issues/846#issuecomment-300836949&quot;&gt;according to a member of the WSL team&lt;/a&gt;:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;When run without arguments, it will launch your default user’s default shell (which is configurable via the chsh command).&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;When run with arguments, it is an easy way to run a specific Linux binary (wsl.exe ls).&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;So that means you can actually use the true default shell now if you call to &lt;strong&gt;wsl.exe&lt;/strong&gt; instead of &lt;strong&gt;bash.exe&lt;/strong&gt;. Here’re examples, Hyper Terminal and Visual Studio Code. First of all, you have to set zsh as the default shell, (obviously). Type this to the current WSL terminal you’re using (like “Bash on Ubuntu on Windows”)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chsh -s $(which zsh)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now back to Hyper, edit the settings file where the &lt;strong&gt;shell&lt;/strong&gt; and &lt;strong&gt;shellArgs&lt;/strong&gt; options are like this&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;shell: 'C:\\Windows\\System32\\wsl.exe',
shellArgs: [],
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2018/Jul/fl-terminal.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That’s Hyper, how about Visual Studio Code? It’s the same. Just change “bash.exe” to “wsl.exe” in the settings file&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\wsl.exe&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There we go! Everything should work fine now.&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Vinh Pham</name>
        
        
      </author>

      

      
        <category term="wsl" />
      

      
        <summary type="html">It isn’t that hard… A few months ago, I wrote an article to show how to get Zsh in WSL on Windows 10. But I haven’t exactly shown how to make it the default shell. In facts, you can’t (not the “official” way anyway), because bash.exe in System32 folder is meant to call bash shell, not zsh. So no matter how you try to set zsh as the default shell through chsh -s $(which zsh), it doesn’t work if you still call to bash.exe everytime you use WSL. Knowing this, the WSL team has made some changes. In the recent Windows 10 Insider builds for Windows 10 Fall Creator Update, there’s a wsl.exe file in System32 which performs two functions according to a member of the WSL team: When run without arguments, it will launch your default user’s default shell (which is configurable via the chsh command). When run with arguments, it is an easy way to run a specific Linux binary (wsl.exe ls). So that means you can actually use the true default shell now if you call to wsl.exe instead of bash.exe. Here’re examples, Hyper Terminal and Visual Studio Code. First of all, you have to set zsh as the default shell, (obviously). Type this to the current WSL terminal you’re using (like “Bash on Ubuntu on Windows”) chsh -s $(which zsh) Now back to Hyper, edit the settings file where the shell and shellArgs options are like this shell: 'C:\\Windows\\System32\\wsl.exe', shellArgs: [], That’s Hyper, how about Visual Studio Code? It’s the same. Just change “bash.exe” to “wsl.exe” in the settings file &quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\sysnative\\wsl.exe&quot; There we go! Everything should work fine now.</summary>
      

      
      
    </entry>
  
</feed>
